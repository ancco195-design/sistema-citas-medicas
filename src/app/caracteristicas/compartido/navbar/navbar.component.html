<nav class="navbar">
  <div class="navbar-contenedor">
    
    <!-- Logo y T√≠tulo -->
    <div class="navbar-marca">
      <span class="navbar-icono">üè•</span>
      <span class="navbar-titulo">Sistema de Citas M√©dicas</span>
    </div>

    <!-- Men√∫ Desktop -->
    <div class="navbar-menu" [class.mostrar]="mostrarMenuMovil">
      <a 
        *ngFor="let enlace of enlacesMenu"
        [routerLink]="enlace.ruta"
        routerLinkActive="activo"
        class="navbar-enlace"
        (click)="mostrarMenuMovil = false"
      >
        <span class="enlace-icono">{{ enlace.icono }}</span>
        <span>{{ enlace.texto }}</span>
      </a>
    </div>

    <!-- Usuario y Men√∫ -->
    <div class="navbar-usuario">
      
      <!-- Badge del Rol -->
      <div class="usuario-rol">
        {{ rolBadge }}
      </div>

      <!-- Bot√≥n de Usuario -->
      <div class="usuario-dropdown">
        <button 
          class="usuario-boton"
          (click)="toggleMenuUsuario()"
        >
          <div class="usuario-avatar">
            {{ usuario?.nombre?.charAt(0) || 'U' }}
          </div>
          <span class="usuario-nombre">{{ nombreCompleto }}</span>
          <span class="usuario-flecha">‚ñº</span>
        </button>

        <!-- Men√∫ Desplegable -->
        <div class="dropdown-menu" *ngIf="mostrarMenuUsuario">
          <div class="dropdown-header">
            <div class="dropdown-avatar">
              {{ usuario?.nombre?.charAt(0) || 'U' }}
            </div>
            <div class="dropdown-info">
              <p class="dropdown-nombre">{{ nombreCompleto }}</p>
              <p class="dropdown-email">{{ usuario?.email }}</p>
            </div>
          </div>
          
          <div class="dropdown-divider"></div>
          
          <a class="dropdown-item" [routerLink]="'/perfil'">
            <span>üë§</span>
            <span>Mi Perfil</span>
          </a>
          
          <a class="dropdown-item" [routerLink]="'/configuracion'">
            <span>‚öôÔ∏è</span>
            <span>Configuraci√≥n</span>
          </a>
          
          <div class="dropdown-divider"></div>
          
          <button class="dropdown-item cerrar-sesion" (click)="cerrarSesion()">
            <span>üö™</span>
            <span>Cerrar Sesi√≥n</span>
          </button>
        </div>
      </div>

      <!-- Bot√≥n Men√∫ M√≥vil -->
      <button 
        class="menu-movil-toggle"
        (click)="toggleMenuMovil()"
      >
        <span class="hamburguesa">‚ò∞</span>
      </button>

    </div>

  </div>
</nav>

<!-- Overlay para cerrar men√∫s -->
<div 
  class="navbar-overlay" a
  *ngIf="mostrarMenuUsuario || mostrarMenuMovil"
  (click)="mostrarMenuUsuario = false; mostrarMenuMovil = false"
></div>